import{useRef as T,useState as m}from"react";import{getOwnerDocument as v}from'../utils/owner.js';import{isIOS as L}from'../utils/platform.js';import{useDocumentOverflowLockedEffect as P}from'./document-overflow/use-document-overflow.js';import{useDisposables as w}from'./use-disposables.js';import{useEvent as l}from'./use-event.js';import{useIsTouchDevice as R}from'./use-is-touch-device.js';import{useOwnerDocument as b}from'./use-owner.js';function D(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function k(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function x(){let e=T(null),[t,n]=m(!1),[u,s]=m(!1),r=w(),o=l(()=>{e.current=null,n(!1),s(!1),r.dispose()}),p=l(f=>{if(r.dispose(),e.current===null){e.current=f.currentTarget,n(!0);{let i=v(f.currentTarget);r.addEventListener(i,"pointerup",o,!1),r.addEventListener(i,"pointermove",g=>{if(e.current){let E=D(g);n(k(E,e.current.getBoundingClientRect()))}},!1),r.addEventListener(i,"pointercancel",o,!1)}}}),a=l(()=>{t&&e.current!==null&&(r.style(e.current,"user-select","none"),L()&&r.style(e.current,"-webkit-user-select","none"))}),d=l(()=>{u||r.setTimeout(()=>s(!0),100)}),h=b(e),c=R();return P(h,u&&c),{pressed:t,pressProps:{onPointerDown:p,onPointerUp:o,onTouchStart:a,onTouchMove:c?d:void 0,onClick:o}}}export{x as useActivePress};
